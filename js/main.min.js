let burgerIcon=document.querySelector(".icon-menu"),menu=document.querySelector(".header__nav"),body=document.querySelector("body");burgerIcon.addEventListener("click",(function(){if(window.innerWidth>510)burgerIcon.classList.toggle("_active"),menu.classList.toggle("_active"),body.classList.contains("disable-scroll")?document.querySelector(".modal").classList.contains("is-open")||bodyEnableScroll():bodyDisableScroll();else{let t=document.querySelector(".modal.is-open");cartWrapper.classList.contains("_open")&&body.classList.contains("disable-scroll")?(cartWrapper.classList.remove("_open"),burgerIcon.classList.add("_active"),menu.classList.add("_active")):(burgerIcon.classList.toggle("_active"),menu.classList.toggle("_active"),burgerIcon.classList.contains("_active")&&!t?bodyDisableScroll():t||bodyEnableScroll())}})),menu.addEventListener("click",(function(t){menu.classList.contains("_active")&&t.target.classList.contains("header__link")&&(burgerIcon.classList.toggle("_active"),menu.classList.toggle("_active"),burgerIcon.classList.contains("_active")||bodyEnableScroll())}));const topCartList=document.querySelector(".top-cart__list"),cartCount=document.querySelector(".cart-header__btn-count"),bottomCartWindow=document.querySelector(".window-cart__bottom");let price=0,num=0;const infoOrderComposition=document.querySelector(".info-order__composition"),cartBtn=document.querySelector(".cart-header__btn"),cartWrapper=document.querySelector(".cart-header__wrapper"),infoOrderList=document.querySelector(".info-order__list"),quantityOrders=document.querySelector(".info-order__element._quantity span"),priceOrders=document.querySelector(".info-order__element._summ span"),cartLogic=()=>{document.querySelectorAll(".add-to-cart-btn").forEach((t=>{t.addEventListener("click",(t=>{const e=t.currentTarget.dataset.id;loadCartData(e)}))}))},loadCartData=(t=1)=>{fetch("../../data/data.json").then((t=>t.json())).then((e=>{for(let n of e)if(n.id==t)return console.log(n),topCartList.insertAdjacentHTML("afterbegin",`\n\t\t\t\t\t<li class="cart-product__item" data-id="${n.id}">\n\t\t\t\t\t\t<article class="cart-product">\n\t\t\t\t\t\t\t<div class="cart-product__img">\n\t\t\t\t\t\t\t\t<img src="${n.mainImage}" alt="${n.title}">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="cart-product__wrapper">\n\t\t\t\t\t\t\t\t<h3 class="cart-product__title">${n.title}</h3>\n\t\t\t\t\t\t\t\t<div class="cart-product__price">${normalPrice(n.price)} ₽</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class="btn-reset cart-product__trash">\n\t\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t\t<use xlink:href="img/sprite.svg#trash"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</article>\n\t\t\t\t\t</li>\n\t\t\t\t`),n})).then((t=>{num++,num>0&&(cartCount.classList.add("_visible"),printQuantity(num),plusFullPrice(t.price),bottomCartWindow.innerHTML=`\n\t\t\t\t<div class="bottom-cart__final-price">\n\t\t\t\t\t<span class="bottom-cart__text">Итого:</span>\n\t\t\t\t\t<span class="bottom-cart__price">${normalPrice(price)} ₽</span>\n\t\t\t\t</div>\n\t\t\t\t<button class="btn-reset bottom-cart__btn btn" data-path="cart-modal">Перейти к оформлению</button>\n\t\t\t`)}))};function windowHeightForMobile(){let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}if(cartBtn.addEventListener("click",(t=>{let e=document.querySelector(".modal.is-open");cartWrapper.classList.toggle("_open"),window.innerWidth<=510&&(burgerIcon.classList.contains("_active")?(burgerIcon.classList.remove("_active"),menu.classList.remove("_active")):e||(cartWrapper.classList.contains("_open")?bodyDisableScroll():bodyEnableScroll()))})),document.addEventListener("click",(t=>{window.innerWidth>767.98?t.target.closest(".cart-header__btn")||t.target.closest(".cart-header__wrapper")||t.target.closest(".product__button")||t.target.classList.contains("content-catalog__btn")||document.querySelector(".modal").classList.contains("is-open")||cartWrapper.classList.remove("_open"):window.innerWidth>510&&(t.target.closest(".cart-header__btn")||t.target.closest(".cart-header__wrapper")||t.target.closest(".product__button")||t.target.classList.contains("content-catalog__btn")||document.querySelector(".modal").classList.contains("_cart")||cartWrapper.classList.remove("_open"))})),topCartList.addEventListener("click",(t=>{const e=t.target;if(e.closest(".cart-product__trash")){const n=e.closest(".cart-product__item"),o=document.querySelector(".bottom-cart__price");let i=parseInt(priceWithoutSpaces(n.querySelector(".cart-product__price").textContent));console.log(i),t.stopPropagation(),n.remove(),minusFullPrice(i),o.textContent=`${normalPrice(price)} ₽`,num--,num<1?(cartCount.classList.remove("_visible"),bottomCartWindow.innerHTML='\n\t\t\t\t<h3 class="bottom-cart__empty">В корзине нет товаров</h3>\n\t\t\t\t<svg>\n\t\t\t\t\t<use xlink:href="img/sprite.svg#sad"></use>\n\t\t\t\t</svg>\n\t\t\t'):printQuantity(num)}})),cartWrapper.addEventListener("click",(t=>{t.target.classList.contains("bottom-cart__btn")&&(infoOrderList.innerHTML=topCartList.innerHTML,quantityOrders.textContent=`${num} шт`,priceOrders.textContent=document.querySelector(".bottom-cart__price").textContent,infoOrderComposition.classList.contains("_open","_is-open")||(infoOrderComposition.classList.add("_open"),setTimeout((()=>orderAccordion.open()))))})),infoOrderList.addEventListener("click",(t=>{if(t.target.classList.contains("cart-product__trash")){const e=t.target.closest(".cart-product__item");let n=parseInt(priceWithoutSpaces(e.querySelector(".cart-product__price").textContent));t.stopPropagation(),e.remove(),num-=1,num>0?(quantityOrders.textContent=`${num} шт`,minusFullPrice(n),priceOrders.textContent=`${normalPrice(price)} ₽`):(modal.close(),minusFullPrice(n),cartCount.classList.remove("_visible"),topCartList.innerHTML="",bottomCartWindow.innerHTML='\n\t\t\t\t<h3 class="bottom-cart__empty">В корзине нет товаров</h3>\n\t\t\t\t<svg>\n\t\t\t\t\t<use xlink:href="img/sprite.svg#sad"></use>\n\t\t\t\t</svg>\n\t\t\t')}})),window.innerWidth<=510&&(windowHeightForMobile(),window.addEventListener("resize",(()=>{windowHeightForMobile()}))),document.querySelector(".right-instagram__swiper")){let t=null,e=767.98;function instSliderInit(){t||(t=new Swiper(".right-instagram__swiper",{slidesPerView:1,effect:"fade",speed:700,observer:!0,autoHeight:!0,loop:!0,spaceBetween:15,autoplay:{delay:3e3}}))}function instSliderDestroy(){t&&(t.destroy(),t=null)}screen.width<=e?instSliderInit():instSliderDestroy(),window.addEventListener("resize",(function(t){screen.width<=e?instSliderInit():instSliderDestroy()}),!0)}function init(){var t=new ymaps.Map("map",{center:[59.939096,30.315871],zoom:11}),e=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[59.90321,30.511746]}});t.geoObjects.add(e)}if(ymaps.ready(init),document.querySelector(".item-left__mainslider",".item-left__subslider")){let n=new Swiper(".item-left__subslider",{slidesPerView:3,speed:700,observer:!0,breakpoints:{400:{slidesPerView:4},600:{slidesPerView:6}}});new Swiper(".item-left__mainslider",{slidesPerView:1,speed:700,thumbs:{swiper:n},observer:!0})}var slider=document.getElementById("slider"),priceStart=document.getElementById("price-start"),priceEnd=document.getElementById("price-end"),prices=[document.getElementById("price-start"),document.getElementById("price-end")];if(slider){function setPriceValues(){let t,e;""!=priceStart.value&&(t=priceStart.value),""!=priceEnd.value&&(e=priceEnd.value),slider.noUiSlider.set([t,e])}noUiSlider.create(slider,{start:[1850,25768],connect:!0,range:{min:1850,max:25768},step:10}),priceStart.addEventListener("click",(function(t){priceStart.select()})),priceEnd.addEventListener("click",(function(t){priceEnd.select()})),priceStart.addEventListener("change",setPriceValues),priceEnd.addEventListener("change",setPriceValues),slider.noUiSlider.on("update",(function(t,e){prices[e].value=Math.round(t[e])}))}const catalogList=document.querySelector(".content-catalog__list"),catalogMore=document.querySelector(".content-catalog__btn"),productModal=document.querySelector('[data-target="product-modal"] .modal-content'),mainProdSlider=document.querySelector(".item-left__mainslider .swiper-wrapper"),subProdSlider=document.querySelector(".item-left__subslider .swiper-wrapper"),productTitle=document.querySelector(".item-right__title"),productSizes=document.querySelector(".sizes__numbers"),productPrices=document.querySelector(".item-right__prices"),productDescr=document.querySelector(".product-description"),productChars=document.querySelector(".product-chars"),productVideo=document.querySelector(".product-modal__video");let prodQuantity=6,dataLength=null;if(catalogList){const o=(t=8)=>{fetch("../../data/data.json").then((t=>t.json())).then((e=>{console.log(e),dataLength=e.length,catalogList.innerHTML="";for(let n=0;n<dataLength;n++)if(n<t){let t=e[n];catalogList.innerHTML+=`\n\t\t\t\t\t\t<li class="content-catalog__item">\n\t\t\t\t\t\t\t<article class="product">\n\t\t\t\t\t\t\t\t<div class="product__image" tabindex="${t.id}">\n\t\t\t\t\t\t\t\t\t<img src="${t.mainImage}" alt="${t.title}">\n\t\t\t\t\t\t\t\t\t<div class="product__btns">\n\t\t\t\t\t\t\t\t\t\t<button class="btn-reset product__button open-modal-btn" data-id="${t.id}" data-path="product-modal" data-animation="fadeInUp" data-speed="500" aria-label="Показать информацию о товаре">\n\t\t\t\t\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="img/sprite.svg#view"></use>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button class="btn-reset product__button add-to-cart-btn" data-id="${t.id}" aria-label="Добавить товар в корзину">\n\t\t\t\t\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="img/sprite.svg#catalog-cart"></use>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h3 class="product__title">${t.title}</h3>\n\t\t\t\t\t\t\t\t<span class="product__price">${normalPrice(t.price)} р</span>\n\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t`}document.querySelectorAll(".add-to-cart-btn").forEach((t=>{t.addEventListener("click",(t=>{const e=t.currentTarget.dataset.id;loadCartData(e)}))}))}))};o(prodQuantity);new Modal({isOpen:t=>{if(console.log("opened"),t.modalContainer.classList.contains("product-modal")){t.modalContainer.parentElement.classList.add("_product"),console.log(t);const e=t.activeBtnId;console.log(e),i(e)}if(t.modalContainer.classList.contains("cart-modal")&&(t.modalContainer.parentElement.classList.add("_cart"),window.innerWidth<=670)){let t=document.querySelector(".header__cart");document.querySelector(".cart-header__wrapper").classList.remove("_open"),t.classList.add("_hidden")}},isClose:t=>{if(t.modalContainer.classList.contains("cart-modal")){t.modalContainer.parentElement.classList.remove("_cart"),infoOrderComposition.classList.contains("_open","_is-open")&&(infoOrderComposition.classList.remove("_open"),orderAccordion.close()),num>0&&(printQuantity(num),topCartList.innerHTML=infoOrderList.innerHTML,document.querySelector(".bottom-cart__price").textContent=document.querySelector(".info-order__element._summ span").textContent),document.querySelector(".header__cart").classList.remove("_hidden")}t.modalContainer.classList.contains("product-modal")&&(mainProdSlider.innerHTML="",subProdSlider.innerHTML="",productTitle.innerHTML="",productSizes.innerHTML="",productPrices.innerHTML="",productDescr.innerHTML="",productChars.innerHTML="",productVideo.innerHTML="",window.innerWidth<=767.98&&t.modalContainer.parentElement.classList.remove("_product")),console.log("closed")}});const i=(t=1)=>{fetch("../../data/data.json").then((t=>t.json())).then((e=>{for(let n of e)if(n.id==t){console.log(n);const t=n.gallery.map((t=>`\n\t\t\t\t\t\t\t<div class="item-left__mainslide swiper-slide">\n\t\t\t\t\t\t\t\t<img src="${t}" alt="">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)),e=n.gallery.map((t=>`\n\t\t\t\t\t\t\t<div class="item-left__subslide swiper-slide">\n\t\t\t\t\t\t\t\t<img src="${t}" alt="">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)),o=n.sizes.map((t=>`\n\t\t\t\t\t\t\t<button class="btn-reset sizes__number">${t}</button>\n\t\t\t\t\t\t`));let i="";Object.keys(n.chars).forEach((function(t){i+=`<p class="property-modal__text">${t}: ${n.chars[t]}</p>`})),mainProdSlider.innerHTML=t.join(""),subProdSlider.innerHTML=e.join(""),productTitle.innerHTML=n.title,productSizes.innerHTML=o.join(""),productPrices.innerHTML=`\n\t\t\t\t\t\t<span class="item-right__price">${n.price}</span>\n\t\t\t\t\t\t${n.oldPrice?`<span class="item-right__old-price">${n.oldPrice}</span>`:""}\n\t\t\t\t\t`,productDescr.textContent=n.description,productChars.innerHTML=i,n.video?(productVideo.style.display="block",productVideo.innerHTML=`<iframe src="${n.video}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`):productVideo.style.display="none"}}))};catalogMore.addEventListener("click",(t=>{prodQuantity+=3,o(prodQuantity),prodQuantity>=dataLength&&setTimeout((()=>{catalogMore.style.display="none"}),100)}))}const quizData=[{number:1,title:"Какой тип обуви рассматриваете?",answer_alias:"type of shoes",answers:[{answer_title:"кеды",type:"checkbox"},{answer_title:"кроссовки",type:"checkbox"},{answer_title:"сланцы",type:"checkbox"},{answer_title:"берцы",type:"checkbox"},{answer_title:"говнотопы",type:"checkbox"},{answer_title:"Зимняя обувь",type:"checkbox"}]},{number:2,title:"Какой размер вам подойдет?",answer_alias:"size",answers:[{answer_title:"менее 36",type:"radio"},{answer_title:"36-38",type:"radio"},{answer_title:"39-41",type:"radio"},{answer_title:"42-44",type:"radio"},{answer_title:"45 и больше",type:"radio"}]},{number:3,title:"Уточните какие-либо моменты",answer_alias:"comments",answers:[{answer_title:"Введите сообщение",type:"textarea"}]}],quizTemplate=(t=[],e,n)=>{const{number:o,title:i}=t,{prevBtnText:s,nextBtnText:r}=n,a=t.answers.map((e=>1===o?`\n\t\t\t<li>\n\t\t\t\t<label class="form-question__label">\n\t\t\t\t\t<div class="form-question__img">\n\t\t\t\t\t\t<img src="../img/sneak01.jpg" alt="">\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<input type="${e.type}" data-valid="false" class="form-question__answer ${"text"!==e.type?"checkbox":""}" name="${t.answer_alias}" ${"text"==e.type?'placeholder="Введите Ваш вариант"':""} value="${"text"!==e.type?e.answer_title:""}">\n\t\t\t\t\t<span class="${"text"!==e.type?"checkbox__text":""}">${e.answer_title}</span>\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t\t`:2===o?`\n\t\t\t<li>\n\t\t\t\t<label class="form-question__label">\t\n\t\t\t\t\t<input type="${e.type}" data-valid="false" class="form-question__answer ${"text"!==e.type?"checkbox":""}" name="${t.answer_alias}" ${"text"==e.type?'placeholder="Введите Ваш вариант"':""} value="${"text"!==e.type?e.answer_title:""}">\n\t\t\t\t\t<span class="${"text"!==e.type?"checkbox__text":""}">${e.answer_title}</span>\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t\t`:"textarea"===e.type?`\n\t\t\t\t<textarea class="form-question__textarea" name="${t.answer_alias}" placeholder="${e.answer_title}"></textarea>\n\t\t\t`:void 0));return 3!==o?` \n\t\t\t<div class="quiz-form__question form-question">\n\t\t\t\t<h2 class="form-question__title">${i}</h2>\n\t\t\t\t<ul class="form-question__answers ${2===o?"_flex":""}">\n\t\t\t\t\t${a.join("")}\n\t\t\t\t</ul>\n\t\t\t\t<div class="form-question__bg" style="${2===o?"display: block;":"display: none;"}">\n\t\t\t\t\t<img src="../img/quiz-bg.jpg" alt="">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-question__bottom">\n\t\t\t\t\t<div class="quiz-form__questions">${o} из ${e}</div>\n\t\t\t\t\t<button type="button" class="btn-reset form-question__btn btn" data-prev-btn>${s}</button>\n\t\t\t\t\t<button type="button" class="btn-reset form-question__btn btn" data-next-btn>${r}</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`:`\n\t\t\t<div class="quiz-form__question form-question">\n\t\t\t\t<h2 class="form-question__title">${i}</h2>\n\t\t\t\t${a.join("")}\n\t\t\t\t<div class="form-question__bottom">\n\t\t\t\t\t<div class="quiz-form__questions">${o} из ${e}</div>\n\t\t\t\t\t<button type="button" class="btn-reset form-question__btn btn" data-prev-btn>${s}</button>\n\t\t\t\t\t<button type="button" class="btn-reset form-question__btn btn" data-send-btn>Далее</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`};class Quiz{constructor(t,e,n){this.$el=document.querySelector(t),this.options=n,this.data=e,this.counter=0,this.dataLength=this.data.length,this.resultArray=[],this.tmp={},this.init(),this.events()}init(){console.log("init!"),this.$el.innerHTML=quizTemplate(quizData[this.counter],this.dataLength,this.options),this.$el.querySelector("[data-prev-btn]").style.display="none"}events(){this.$el.addEventListener("click",(t=>{t.target==this.$el.querySelector("[data-prev-btn]")&&(this.removeToSend(),this.prevQuestion())})),this.$el.addEventListener("click",(t=>{t.target==this.$el.querySelector("[data-next-btn]")&&this.valid()&&(this.addToSend(),this.nextQuestion()),t.target==document.querySelector("[data-send-btn]")&&this.valid()&&(this.addToSend(),this.send())})),this.$el.addEventListener("input",(t=>{if("INPUT"==t.target.tagName&&"checkbox"!==t.target.type&&"radio"!==t.target.type){let t=this.$el.querySelectorAll("input");t.forEach((t=>{if("text"!==t.type){t.nextElementSibling.classList.remove("error")}else t.classList.remove("error")})),t.forEach((t=>t.checked=!1))}})),this.$el.addEventListener("change",(t=>{if("checkbox"==t.target.type||"radio"==t.target.type){let t=this.$el.querySelectorAll("input");t.forEach((t=>{if("text"!==t.type){t.nextElementSibling.classList.remove("error")}else t.classList.remove("error")}));for(let e=0;e<t.length;e++){let n=t[e];"text"==n.type&&(n.value="")}}this.tmp=this.serialize(this.$el),console.log(this.tmp)}))}prevQuestion(){console.log("prev question!"),this.counter--,this.$el.innerHTML=quizTemplate(quizData[this.counter],this.dataLength,this.options);let t=document.querySelector(".quiz").offsetTop-64;window.scroll(0,t),0==this.counter&&(this.$el.querySelector("[data-prev-btn]").style.display="none")}nextQuestion(){if(console.log("next question!"),0!==this.counter&&(this.$el.querySelector("[data-prev-btn]").style.display="inline-block"),this.counter<this.dataLength){this.counter++,this.$el.innerHTML=quizTemplate(quizData[this.counter],this.dataLength,this.options);let t=document.querySelector(".quiz").offsetTop-64;window.scroll(0,t)}}valid(){let t=!1;this.$el.querySelectorAll("input").forEach((e=>{let n=e.nextElementSibling;switch(e.type){case"text":e.value?t=!0:e.classList.add("error");case"checkbox":e.checked?t=!0:n.classList.add("error");case"radio":e.checked?t=!0:n.classList.add("error")}}));let e=this.$el.querySelector(".form-question__textarea");return e&&(t=!0,""===e.value&&(this.tmp="")),t}removeToSend(){var t=this.resultArray.pop();console.log("Удаленный элемент: %o",t)}addToSend(){this.resultArray.push(this.tmp)}send(){console.log("send!"),console.log(this.resultArray),document.querySelector(".quiz__title").textContent="Ваша подборка готова!",document.querySelector(".quiz__descr").textContent="Оставьте свои контактные данные, чтобы бы мы могли отправить  подготовленный для вас каталог",this.$el.style.display="none",document.querySelector(".quiz-form").innerHTML='\n\t\t\t<div class="quiz-form__collection collection-quiz">\n\t\t\t\t<h3 class="collection-quiz__title _title">Получить предложение</h3>\n\t\t\t\t<p class="collection-quiz__descr">Получите подборку подходящих для вас моделей на почту</p>\n\t\t\t\t<input required name="name" type="text" placeholder="Ваше имя" class="collection-quiz__input" data-name-input>\n\t\t\t\t<input required name="email" type="email" placeholder="E-mail" class="collection-quiz__input" data-email-input>\n\t\t\t\t<button type="button" class="btn-reset collection-quiz__btn btn">Получить</button>\n\t\t\t\t<div class="collection-quiz__img">\n\t\t\t\t\t<img src="../img/iphone.png" alt="">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',document.querySelector(".collection-quiz__btn").addEventListener("click",(t=>{let e=document.querySelector("[data-name-input]"),n=document.querySelector("[data-email-input]");const o={Name:e.value,"E-mail":n.value};Object.entries(o).map((t=>{let e=t.reduce(((e,n,o)=>(0===o&&(e[n]=t[o+1]),e)),{});this.resultArray.push(e)})),console.log(this.resultArray);const i=new FormData;for(let t of this.resultArray)for(let e in t)i.append(e,t[e].substring(0,t[e].length-1))}))}serialize(t){let e,n=t.parentElement,o={},i="";if("object"==typeof n&&"FORM"==n.nodeName){let t=n.elements.length;for(let s=0;s<t;s++)if(e=n.elements[s],e.name&&!e.disabled&&"file"!=e.type&&"reset"!=e.type&&"submit"!=e.type&&"button"!=e.type)if("select-multiple"==e.type)for(j=n.elements[s].options.length-1;j>=0;j--)e.options[j].selected&&(o[o.length]=encodeURIComponent(e.name)+"="+encodeURIComponent(e.options[j].value));else("checkbox"!=e.type&&"radio"!=e.type&&e.value||e.checked)&&(i+=e.value+" ",o[e.name]=i)}return o}}window.quiz=new Quiz(".quiz-form .quiz-form__content",quizData,{prevBtnText:"Назад",nextBtnText:"Следующий шаг"});const catalog=document.querySelector(".catalog"),about=document.querySelector(".about"),quiz=document.querySelector(".quiz"),team=document.querySelector(".team"),faq=document.querySelector(".faq"),contacts=document.querySelector(".contacts");function scrollToTargetAdjusted(t){let e=document.querySelector(".modal.is-open");var n=t.getBoundingClientRect().top+window.pageYOffset-64;if(e){let t=e.querySelector(".modal__container.open-animate");t.classList.contains("product-modal")?t.className="modal__container product-modal":t.classList.contains("cart-modal")&&(t.className="modal__container cart-modal",document.querySelector(".header__cart").classList.remove("_hidden")),e.className="modal",modal.isOpen=!1,document.body.style.paddingRight=null}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.scrollTo({top:n,behavior:"auto"}):window.scrollTo({top:n,behavior:"smooth"})}document.addEventListener("click",(t=>{t.target.hasAttribute("data-catalog")&&(t.preventDefault(),scrollToTargetAdjusted(catalog)),t.target.hasAttribute("data-about")&&(t.preventDefault(),scrollToTargetAdjusted(about)),t.target.hasAttribute("data-quiz")&&(t.preventDefault(),scrollToTargetAdjusted(quiz)),t.target.hasAttribute("data-team")&&(t.preventDefault(),scrollToTargetAdjusted(team)),t.target.hasAttribute("data-faq")&&(t.preventDefault(),scrollToTargetAdjusted(faq)),t.target.hasAttribute("data-contacts")&&(t.preventDefault(),scrollToTargetAdjusted(contacts))}));let tooltip=document.querySelector(".tooltip");function bodyDisableScroll(){let t=window.scrollY;body.classList.add("disable-scroll"),body.dataset.position=t,body.style.top=-t+"px"}function bodyEnableScroll(){let t=parseInt(document.body.dataset.position,10);body.style.top=null,body.classList.remove("disable-scroll"),window.scroll({top:t,left:0}),body.removeAttribute("data-position")}tooltip&&document.addEventListener("click",(t=>{let e=t.target;e.closest(".tooltip")&&!e.closest("._tooltip-open")?tooltip.classList.add("_tooltip-open"):(!e.closest(".tooltip__text")&&e.closest("._tooltip-open")||!e.closest("._tooltip-open"))&&tooltip.classList.remove("_tooltip-open")}));const normalPrice=t=>String(t).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),plusFullPrice=t=>price+=t,minusFullPrice=t=>price-=t,priceWithoutSpaces=t=>t.replace(/\s/g,""),printQuantity=t=>{cartCount.textContent=t},reOpenCartModal=()=>{modal.close(),modal._nextContainer=document.querySelector('[data-target="cart-modal"]'),setTimeout((()=>modal.open()),1e3)};class Accordion{constructor(t,e){this.options=Object.assign({isOpen:()=>{},isClose:()=>{},speed:300},e),this.accordion=document.querySelector(t),this.control=this.accordion.querySelector("._accordion-control"),this.content=this.accordion.querySelector("._accordion-content"),this.accordion.style.setProperty("--accordion-time",this.options.speed/1e3+"s"),this.event()}event(){this.accordion&&this.accordion.addEventListener("click",(t=>{t.target.closest("._accordion-control")&&(this.accordion.classList.toggle("_open"),this.accordion.classList.contains("_open")?this.open():this.content.style.maxHeight?this.close():(this.content.style.maxHeight=this.content.scrollHeight+"px",setTimeout((()=>this.close()))))}))}open(){this.accordion.classList.add("_is-open"),this.control.setAttribute("aria-expanded",!0),this.content.setAttribute("aria-hidden",!1),this.content.style.setProperty("max-height",`${this.content.scrollHeight}px`),this.options.isOpen(this)}close(){this.accordion.classList.remove("_is-open"),this.control.setAttribute("aria-expanded",!1),this.content.setAttribute("aria-hidden",!0),this.content.style.setProperty("max-height",0),this.options.isClose(this)}}const faqAccordion1=new Accordion(".accordion-1",{isOpen:t=>{console.log(t)},isClose:t=>{console.log(t)}}),faqAccordion2=new Accordion(".accordion-2"),orderAccordion=new Accordion("._orderAccordion",{isClose:t=>{console.log(t)}});class DynamicAdapt{elementsArray=[];daClassname="_dynamic_adapt_";constructor(t){this.type=t}init(){this.elements=[...document.querySelectorAll("[data-da]")],this.elements.forEach((t=>{const e=t.dataset.da.trim();if(""!==e){const n=e.split(","),o={};o.element=t,o.parent=t.parentNode,o.destination=document.querySelector(`.${n[0].trim()}`),o.breakpoint=n[1]?n[1].trim():"767",o.place=n[2]?n[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.elementsArray.push(o)}})),this.arraySort(this.elementsArray),this.mediaArray=this.elementsArray.map((({breakpoint:t})=>`(${this.type}-width: ${t}px),${t}`)).filter(((t,e,n)=>n.indexOf(t)===e)),this.mediaArray.forEach((t=>{const e=t.split(","),n=window.matchMedia(e[0]),o=e[1],i=this.elementsArray.filter((({breakpoint:t})=>t===o));n.addEventListener("change",(()=>{this.mediaHandler(n,i)})),this.mediaHandler(n,i)}))}mediaHandler(t,e){t.matches?e.forEach((t=>{t.index=this.indexInParent(t.parent,t.element),this.moveTo(t.place,t.element,t.destination)})):e.forEach((({parent:t,element:e,index:n})=>{e.classList.contains(this.daClassname)&&this.moveBack(t,e,n)}))}moveTo(t,e,n){e.classList.add(this.daClassname),"last"===t||t>=n.children.length?n.append(e):"first"!==t?n.children[t].before(e):n.prepend(e)}moveBack(t,e,n){e.classList.remove(this.daClassname),void 0!==t.children[n]?t.children[n].before(e):t.append(e)}indexInParent(t,e){return[...t.children].indexOf(e)}arraySort(t){"min"===this.type?t.sort(((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint)):t.sort(((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint))}}const da=new DynamicAdapt("max");da.init();class Modal{constructor(t){this.options=Object.assign({isOpen:()=>{},isClose:()=>{}},t),this.modal=document.querySelector(".modal"),this.speed=300,this.animation="fade",this._reOpen=!1,this._nextContainer=!1,this.modalContainer=!1,this.isOpen=!1,this.activeBtnId=!1,this.previousActiveElement=!1,this._focusElements=["a[href]","input","select","textarea","button","iframe","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this._fixBlocks=document.querySelectorAll(".fix-block"),this.events()}events(){this.modal&&(document.addEventListener("click",function(t){const e=t.target.closest("[data-path]");if(e){this.activeBtnId=e.dataset.id;let t=e.dataset.path;if(window.innerWidth<767.98&&!0===this.isOpen&&"cart-modal"===t)return modal.close(),modal._nextContainer=document.querySelector('[data-target="cart-modal"]'),setTimeout((()=>modal.open()),1e3),void setTimeout((()=>infoOrderList.style.setProperty("max-height",`${infoOrderList.scrollHeight}px`)),1e3);let n=e.dataset.animation,o=e.dataset.speed;return this.animation=n||"fade",this.speed=o?parseInt(o):300,this._nextContainer=document.querySelector(`[data-target="${t}"]`),void this.open()}}.bind(this)),window.addEventListener("keydown",function(t){27==t.keyCode&&this.isOpen&&this.close(),9==t.which&&this.isOpen&&this.focusCatch(t)}.bind(this)),this.modal.addEventListener("click",function(t){(!t.target.classList.contains("modal__container")&&!t.target.closest(".modal__container")&&this.isOpen||t.target.closest(".modal__close"))&&this.close()}.bind(this)))}open(t){if(this.previousActiveElement=document.activeElement,this.isOpen)return console.log(modal),this.reOpen=!0,void this.close();this.modalContainer=this._nextContainer,t&&(this.modalContainer=document.querySelector(`[data-target="${t}"]`)),this.modal.style.setProperty("--transition-time",this.speed/1e3+"s"),this.modal.classList.add("is-open"),this.disableScroll(),this.modalContainer.classList.add(this.animation),setTimeout((()=>{this.options.isOpen(this),this.modalContainer.classList.add("open-animate"),this.isOpen=!0,this.focusTrap()}),this.speed)}close(){this.modalContainer&&(this.modalContainer.classList.remove("open-animate"),setTimeout((()=>{this.modalContainer.classList.remove(this.animation),this.modal.classList.remove("is-open"),this.enableScroll(),this.options.isClose(this),this.isOpen=!1,this.focusTrap()}),this.speed),this.reOpen&&(this.reOpen=!1,this.open()))}focusCatch(t){const e=this.modalContainer.querySelectorAll(this._focusElements),n=Array.prototype.slice.call(e),o=n.indexOf(document.activeElement);t.shiftKey&&0===o&&(n[n.length-1].focus(),t.preventDefault()),t.shiftKey||o!==n.length-1||(n[0].focus(),t.preventDefault())}focusTrap(){const t=this.modalContainer.querySelectorAll(this._focusElements);this.isOpen?t.length&&t[0].focus():this.previousActiveElement.focus()}disableScroll(){if(!document.body.classList.contains("disable-scroll")){let t=window.scrollY;this.lockPadding(),document.body.classList.add("disable-scroll"),document.body.dataset.position=t,document.body.style.top=-t+"px"}}enableScroll(){let t=parseInt(document.body.dataset.position,10);this.unlockPadding(),document.body.style.top=null,document.body.classList.remove("disable-scroll"),window.scroll({top:t,left:0}),document.body.removeAttribute("data-position")}lockPadding(){let t=window.innerWidth-document.body.offsetWidth+"px";console.log(t),this._fixBlocks.forEach((e=>{e.style.paddingRight=t})),document.body.style.paddingRight=t}unlockPadding(){this._fixBlocks.forEach((t=>{t.style.paddingRight=null})),document.body.style.paddingRight=null}}